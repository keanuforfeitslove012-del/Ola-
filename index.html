<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Valentine Lyne</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
            background-color: #0f172a;
            color: white;
        }
        
        .font-script {
            font-family: 'Great Vibes', cursive;
        }

        /* Background Animation */
        .bg-animate {
            background: linear-gradient(-45deg, #0f172a, #1e1b4b, #312e81, #0f172a);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Heartbeat Animation */
        .heartbeat {
            animation: beat 1.5s infinite;
        }
        @keyframes beat {
            0% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.1); }
            70% { transform: scale(1); }
        }

        /* Box Flip Animation */
        .flip-card {
            perspective: 1000px;
            cursor: pointer;
        }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }
        .flip-card-front {
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            border: 2px solid #fbcfe8;
        }
        .flip-card-back {
            background: linear-gradient(135deg, #4c1d95 0%, #312e81 100%);
            color: white;
            transform: rotateY(180deg);
            padding: 1rem;
            border: 2px solid #c4b5fd;
        }

        /* Firefly Animation */
        .firefly {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: #fbbf24;
            border-radius: 50%;
            box-shadow: 0 0 10px #fbbf24, 0 0 20px #fbbf24;
            opacity: 0;
            animation: fly 10s infinite linear;
            pointer-events: none;
        }
        @keyframes fly {
            0% { transform: translate(0, 0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)); opacity: 0; }
        }

        /* Heart Burst Particles */
        .particle {
            position: absolute;
            pointer-events: none;
            animation: pop 1s ease-out forwards;
            font-size: 2rem;
        }
        @keyframes pop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            100% { transform: translate(var(--dx), var(--dy)) scale(1.5); opacity: 0; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #be185d; 
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-animate min-h-screen relative selection:bg-pink-500 selection:text-white">

    <!-- Canvas for Waterfall Effect -->
    <canvas id="waterfallCanvas" class="fixed top-0 left-0 w-full h-full -z-10 opacity-40"></canvas>

    <!-- Fireflies Container -->
    <div id="fireflies" class="fixed top-0 left-0 w-full h-full pointer-events-none -z-5 overflow-hidden"></div>

    <!-- Audio Context Starter Overlay -->
    <div id="startOverlay" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm transition-opacity duration-500">
        <div class="text-center">
            <h1 class="text-4xl font-script text-pink-400 mb-4 animate-pulse">A Surprise for Lyne</h1>
            <button id="startBtn" class="px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-full font-bold text-lg transition-all transform hover:scale-105 shadow-[0_0_20px_rgba(236,72,153,0.6)]">
                Open Your Gift üíù
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="relative z-10 container mx-auto px-4 py-8 max-w-4xl">
        
        <!-- Header -->
        <header class="text-center mb-12 pt-8">
            <h1 class="text-5xl md:text-7xl font-script text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] mb-4">
                My Dearest Lyne
            </h1>
            <p class="text-pink-200 text-lg tracking-widest uppercase opacity-80">Happy Valentine's Day</p>
        </header>

        <!-- The Big Heart -->
        <div class="flex justify-center mb-16 relative">
            <div id="bigHeartContainer" class="relative group cursor-pointer">
                <div id="bigHeart" class="text-9xl md:text-[10rem] filter drop-shadow-[0_0_30px_rgba(225,29,72,0.6)] transition-transform duration-100 select-none heartbeat">
                    ‚ù§Ô∏è
                </div>
                <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap">
                    <span class="text-pink-300 font-bold text-sm md:text-base bg-black/30 px-4 py-1 rounded-full backdrop-blur-md border border-pink-500/30 animate-bounce">
                        Tap me till I break!
                    </span>
                </div>
                <!-- Health Bar -->
                <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-32 h-2 bg-gray-700 rounded-full overflow-hidden border border-gray-600">
                    <div id="heartHealth" class="h-full bg-gradient-to-r from-pink-500 to-red-600 w-full transition-all duration-200"></div>
                </div>
            </div>
        </div>

        <!-- Love Letter -->
        <section class="glass rounded-2xl p-8 md:p-12 mb-16 shadow-2xl transform hover:scale-[1.01] transition-transform duration-500 border-t border-white/10">
            <div class="prose prose-lg prose-invert mx-auto text-center">
                <p class="text-xl md:text-2xl leading-relaxed text-pink-100 font-light">
                    My Love, <br><br>
                    From the moment you walked into my life, you turned my monochrome world into a vibrant masterpiece of colors I never knew existed. Lyne, you are not just my Valentine; you are the melody to my silence, the warmth to my cold nights, and the peace to my chaos. <br><br>
                    Every laugh we share is a note in our favorite song, every touch is a spark that lights up my universe, and every moment with you feels like catching fireflies in a jar‚Äîmagical, precious, and glowing with pure joy. <br><br>
                    I promise to be your safe harbor, your loudest cheerleader, and your partner in every adventure. You are my today, my tomorrow, and my forever. I love you more than words can capture, more than the stars can count, and more with every single heartbeat.
                </p>
                <div class="mt-8 font-script text-4xl text-pink-400">Forever Yours</div>
            </div>
        </section>

        <!-- Surprise Boxes Grid -->
        <section class="mb-20">
            <h2 class="text-3xl font-script text-center text-purple-200 mb-10">Unlock My Heart</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 px-4">
                
                <!-- Box 1 -->
                <div class="flip-card h-64 w-full" onclick="toggleBox(this, 0)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front flex-col">
                            <span class="text-6xl mb-2">üéÅ</span>
                            <span class="font-bold text-xl tracking-wider">TAP ME</span>
                        </div>
                        <div class="flip-card-back flex-col">
                            <p class="text-lg font-script leading-relaxed">"You are the reason I believe in magic."</p>
                        </div>
                    </div>
                </div>

                <!-- Box 2 -->
                <div class="flip-card h-64 w-full" onclick="toggleBox(this, 1)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front flex-col">
                            <span class="text-6xl mb-2">üéÅ</span>
                            <span class="font-bold text-xl tracking-wider">TAP ME</span>
                        </div>
                        <div class="flip-card-back flex-col">
                            <p class="text-lg font-script leading-relaxed">"In your eyes, I found my home."</p>
                        </div>
                    </div>
                </div>

                <!-- Box 3 -->
                <div class="flip-card h-64 w-full" onclick="toggleBox(this, 2)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front flex-col">
                            <span class="text-6xl mb-2">üéÅ</span>
                            <span class="font-bold text-xl tracking-wider">TAP ME</span>
                        </div>
                        <div class="flip-card-back flex-col">
                            <p class="text-lg font-script leading-relaxed">"I fall for you every single day."</p>
                        </div>
                    </div>
                </div>

                <!-- Box 4 -->
                <div class="flip-card h-64 w-full" onclick="toggleBox(this, 3)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front flex-col">
                            <span class="text-6xl mb-2">üéÅ</span>
                            <span class="font-bold text-xl tracking-wider">TAP ME</span>
                        </div>
                        <div class="flip-card-back flex-col">
                            <p class="text-lg font-script leading-relaxed">"You are my favorite notification."</p>
                        </div>
                    </div>
                </div>

                <!-- Box 5 -->
                <div class="flip-card h-64 w-full" onclick="toggleBox(this, 4)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front flex-col">
                            <span class="text-6xl mb-2">üéÅ</span>
                            <span class="font-bold text-xl tracking-wider">TAP ME</span>
                        </div>
                        <div class="flip-card-back flex-col">
                            <p class="text-lg font-script leading-relaxed">"My heart is and always will be yours."</p>
                        </div>
                    </div>
                </div>

                <!-- Box 6 -->
                <div class="flip-card h-64 w-full" onclick="toggleBox(this, 5)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front flex-col">
                            <span class="text-6xl mb-2">üéÅ</span>
                            <span class="font-bold text-xl tracking-wider">TAP ME</span>
                        </div>
                        <div class="flip-card-back flex-col">
                            <p class="text-lg font-script leading-relaxed">"I love you to the moon and back, Lyne."</p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <footer class="text-center text-pink-300/50 text-sm pb-8">
            <p>Made with üíñ for Lyne</p>
        </footer>

    </main>

    <script>
        // --- Audio Setup (Tone.js) ---
        let synth;
        let isAudioReady = false;

        async function initAudio() {
            await Tone.start();
            synth = new Tone.PolySynth(Tone.Synth, {
                oscillator: { type: "triangle" },
                envelope: { attack: 0.05, decay: 0.1, sustain: 0.3, release: 1 }
            }).toDestination();
            
            // Add some reverb for atmosphere
            const reverb = new Tone.Reverb({ decay: 4, wet: 0.5 }).toDestination();
            synth.connect(reverb);
            
            isAudioReady = true;
            
            // Play a welcome chord
            playChord(['C4', 'E4', 'G4', 'B4']);
        }

        function playNote(note) {
            if (isAudioReady) synth.triggerAttackRelease(note, "8n");
        }

        function playChord(notes) {
            if (isAudioReady) synth.triggerAttackRelease(notes, "2n");
        }

        // --- UI Interactions ---

        const startOverlay = document.getElementById('startOverlay');
        const startBtn = document.getElementById('startBtn');

        startBtn.addEventListener('click', () => {
            initAudio();
            startOverlay.style.opacity = '0';
            setTimeout(() => {
                startOverlay.style.display = 'none';
            }, 500);
        });

        // --- Surprise Boxes ---
        const boxNotes = ['C5', 'D5', 'E5', 'F5', 'G5', 'A5'];
        
        function toggleBox(element, index) {
            element.classList.toggle('flipped');
            
            // Play sound
            if (isAudioReady) {
                playNote(boxNotes[index % boxNotes.length]);
            }
        }

        // --- Big Heart Logic ---
        const bigHeart = document.getElementById('bigHeart');
        const heartHealth = document.getElementById('heartHealth');
        const bigHeartContainer = document.getElementById('bigHeartContainer');
        let clicks = 0;
        const maxClicks = 10;
        let isBroken = false;

        bigHeartContainer.addEventListener('click', (e) => {
            if (isBroken) return;

            clicks++;
            
            // Visual Shake
            bigHeart.style.transform = `scale(${1 + (clicks * 0.05)}) rotate(${Math.random() * 10 - 5}deg)`;
            setTimeout(() => {
                if (!isBroken) bigHeart.style.transform = 'scale(1)';
            }, 100);

            // Play thump sound
            if (isAudioReady) {
                const drum = new Tone.MembraneSynth().toDestination();
                drum.triggerAttackRelease("C2", "8n");
            }

            // Update Health Bar
            const healthPercent = 100 - (clicks / maxClicks) * 100;
            heartHealth.style.width = `${healthPercent}%`;

            if (clicks >= maxClicks) {
                breakHeart(e);
            }
        });

        function breakHeart(e) {
            isBroken = true;
            bigHeart.style.display = 'none'; // Hide main heart
            heartHealth.parentElement.style.display = 'none'; // Hide health bar
            
            // Play explosion sound
            if (isAudioReady) {
                const noise = new Tone.NoiseSynth({
                    noise: { type: 'pink' },
                    envelope: { attack: 0.005, decay: 0.5, sustain: 0 }
                }).toDestination();
                noise.triggerAttackRelease("8n");
                
                playChord(['C4', 'E4', 'G4', 'C5', 'E5']); // Victory chord
            }

            // Burst Emojis
            createBurst(e.clientX, e.clientY);
            
            // Show message
            const msg = document.createElement('div');
            msg.innerText = "You broke my heart... with love! üíñ";
            msg.className = "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl font-bold text-pink-300 whitespace-nowrap animate-bounce";
            bigHeartContainer.appendChild(msg);
        }

        function createBurst(x, y) {
            const emojis = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíì', 'üíï', 'üòç', 'üíò'];
            const count = 50;

            for (let i = 0; i < count; i++) {
                const el = document.createElement('div');
                el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                el.className = 'particle';
                
                // Random direction
                const angle = Math.random() * Math.PI * 2;
                const velocity = 100 + Math.random() * 200;
                const tx = Math.cos(angle) * velocity + 'px';
                const dy = Math.sin(angle) * velocity + 'px';
                
                el.style.setProperty('--dx', tx);
                el.style.setProperty('--dy', dy);
                el.style.left = x + 'px';
                el.style.top = y + 'px';
                
                document.body.appendChild(el);
                
                // Cleanup
                setTimeout(() => el.remove(), 1000);
            }
        }

        // --- Fireflies System ---
        function createFireflies() {
            const container = document.getElementById('fireflies');
            const count = 30;

            for (let i = 0; i < count; i++) {
                const fly = document.createElement('div');
                fly.className = 'firefly';
                
                // Random positioning
                fly.style.left = Math.random() * 100 + 'vw';
                fly.style.top = Math.random() * 100 + 'vh';
                
                // Random movement variables
                fly.style.setProperty('--tx', (Math.random() * 200 - 100) + 'px');
                fly.style.setProperty('--ty', (Math.random() * 200 - 100) + 'px');
                
                // Random animation duration and delay
                fly.style.animationDuration = (5 + Math.random() * 10) + 's';
                fly.style.animationDelay = Math.random() * 5 + 's';
                
                container.appendChild(fly);
            }
        }
        createFireflies();

        // --- Waterfall Canvas Effect ---
        const canvas = document.getElementById('waterfallCanvas');
        const ctx = canvas.getContext('2d');
        
        let width, height;
        let particles = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class WaterParticle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * -height;
                this.speed = 2 + Math.random() * 5;
                this.length = 10 + Math.random() * 20;
                this.opacity = 0.1 + Math.random() * 0.3;
                this.width = 1 + Math.random() * 2;
            }

            update() {
              
